generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 1. ÜRÜN MODELİ (Resim alanı eklendi)
model Product {
  id          String   @id @default(cuid())
  title       String
  description String
  price       Int
  category    String?
  tags        String?
  
  // YENİ ALAN: Kapak Resmi
  imageUrl    String?  @default("/placeholder.png")
  
  pdfUrl      String
  fileName    String
  fileSize    Int
  
  isApproved  Boolean  @default(false)
  isActive    Boolean  @default(true)
  views       Int      @default(0)
  
  sellerId    String
  createdAt   DateTime @default(now())

  orders      Order[]
}

// 2. SİPARİŞ MODELİ
model Order {
  id             String   @id @default(cuid())
  orderNumber    String
  productId      String
  productTitle   String
  pricePaid      Int
  status         String
  buyerId        String
  buyerEmail     String
  sellerId       String
  downloadToken  String
  downloadExpiry DateTime
  createdAt      DateTime @default(now())

  product        Product  @relation(fields: [productId], references: [id])
}

// 3. SATICI PROFİLİ MODELİ
model SellerProfile {
  id              String   @id @default(cuid())
  userId          String   @unique
  shopName        String
  iban            String
  taxId           String?
  address         String
  isTermsAccepted Boolean  @default(false)
  createdAt       DateTime @default(now())
}